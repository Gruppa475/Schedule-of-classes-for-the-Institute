!function(o,e){"use strict";o.addEventListener("DOMContentLoaded",function(){var a=o.querySelector(".plg-dpcalendarpay-stripe");e.setPublishableKey(a.getAttribute("data-key")),o.querySelector(".plg-dpcalendarpay-stripe__button-bar .dp-button-submit").addEventListener("click",function(){return a.querySelector('[name="token"]').value&&this.form.submit(),this.setAttribute("disabled",!0),e.createToken({name:a.querySelector('[name="card-holder"]').value,number:a.querySelector('[name="card-number"]').value,exp_month:parseInt(a.querySelector('[name="card-expiry-month"]').value),exp_year:parseInt(a.querySelector('[name="card-expiry-year"]').value),cvc:a.querySelector('[name="card-cvc"]').value},function(e,r){if([].slice.call(a.querySelectorAll(".dp-control")).forEach(function(e){e.classList.remove("plg-dpcalendarpay-stripe__message_error")}),!r.error)return a.querySelector(".plg-dpcalendarpay-stripe__message").display="none",a.querySelector('[name="token"]').value=r.id,void a.querySelector(".plg-dpcalendarpay-stripe__form").submit();var t=a.querySelector(".plg-dpcalendarpay-stripe__message");"incorrect_number"==r.error.code?(a.querySelector('[name="card-number"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_INCORRECT_NUMBER")):"invalid_number"==r.error.code?(a.querySelector('[name="card-number"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_INVALID_NUMBER")):"invalid_expiry_month"==r.error.code?(a.querySelector('[name="card-expiry-month"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_INVALID_EXP_MONTH")):"invalid_expiry_year"==r.error.code?(a.querySelector('[name="card-expiry-month"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_INVALID_EXP_YEAR")):"invalid_cvc"==r.error.code?(a.querySelector('[name="card-cvc"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_INVALID_CVC")):"expired_card"==r.error.code?(a.querySelector('[name="card-expiry-month"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_EXPIRED_CARD")):"incorrect_cvc"==r.error.code?(a.querySelector('[name="card-cvc"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_INCORRECT_CVC")):"card_declined"==r.error.code?(a.querySelector('[name="card-number"]').closest(".dp-control").classList.add("plg-dpcalendarpay-stripe__message_error"),t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_CARD_DECLINED")):"missing"==r.error.code?t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_MISSING"):"processing_error"==r.error.code?t.textContent=Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_PROCESSING_ERROR"):t.textContent=401==e?Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_UNAUTHORIZED"):402==e?Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_REQUEST_FAILED"):404==e?Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_NOT_FOUND"):500<=e?Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_SERVER_ERROR"):Joomla.JText._("PLG_DPCALENDARPAY_STRIPE_FORM_UNKNOWN_ERROR"),t.style.display="block",o.querySelector(".plg-dpcalendarpay-stripe__button-bar .dp-button-submit").disabled=!1}),!1})})}(document,Stripe);
